{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,8BAIA,MAKaC,EAAUC,SAASC,cAAc,YACxCC,EAAaF,SAASC,cAAc,gBAI1CC,EAAWC,iBAAiB,QAASC,EAAAC,EAAA,EAAUC,MAAMC,IACnDA,EAAMC,iBAGN,MAAMC,EAAQP,EAAWQ,MAAMC,OAE/BC,EAAoBH,EAAM,GAhBL,MAmBhB,MAAMG,EAAsBN,MAAOO,EAAOC,EAAO,KAEtD,MAAMC,EAAoB,4FAAsEF,UAAcC,IAExGE,QAAiBnB,EAAAoB,QACpBC,IAAIH,GACJI,MAAMC,IAkBX,SAAyBA,GAHvBrB,EAAQsB,UAAY,GAMpB,MAAMC,EAAWF,EAASG,KAAKC,QAM/B,SAASC,EAAYC,GACnBA,EAAMC,KAAIC,KAmBd,SAAmBF,GACjB,IAAIG,EAAS,kCAAkCH,EAAMI,cAErD/B,EAAQgC,mBACN,YACA,gCAAgCL,EAAMM,2BACtBH,WAAgBH,EAAMjB,0JAGIiB,EAAMjB,8DAEjBiB,EAAMO,aAAaC,MAAM,EAAE,mD,CA5BxDC,CAAUP,EAAK,G,CARnBQ,IAAYjB,MAAKS,IAEfH,EAAYH,EAAS,G,CAvBnBe,CAAgBjB,GAGTA,KAERkB,OAAOC,IACNC,QAAQC,IAAIF,EAAM,IAItB,OADAC,QAAQC,IAAI,WAAYzB,GACjBA,CAAQ,EAsDV,MAAM0B,EAAqBpC,eAGTT,EAAAoB,QACpBC,IAHsB,mGAItBC,MAAK,SAAUC,GACd,OAAOA,C,IAERkB,OAAM,SAAUC,GACfC,QAAQC,IAAIF,E,IAMLH,EAAY9B,eAGAT,EAAAoB,QACpBC,IAHe,0FAIfC,MAAK,SAAUC,GACd,OAAOA,EAASG,KAAKoB,M,IAEtBL,OAAM,SAAUC,GACfC,QAAQC,IAAIF,E,IAsBlBvC,SAASG,iBAAiB,wBCrIxBiC,IAAYjB,MAAKS,IACf,MAAMe,EAASf,EACfY,QAAQC,IAAIE,GAEZD,IAAqBvB,MAAKyB,IACtB,MAAMC,EAAUD,EAAOrB,KAAKC,QAC5BgB,QAAQC,IAAIG,EAAOrB,KAAKC,SAK9B,SAAqBsB,EAAQH,GAC3BG,EAAOnB,KAAID,IACX,MAAMqB,EAKR,SAAsBrB,EAAOiB,GACzB,OAAOA,EAAOK,QAAO,CAACC,EAAarB,KAC7BF,EAAMwB,UAAUC,SAASvB,EAAKI,KAChCiB,EAAYG,KAAKxB,EAAKyB,MAEjBJ,IACN,G,CAXcK,CAAa5B,EAAOiB,IACvC,EAAAY,EAAAC,aAAY9B,EAAOqB,EAAW,G,CAP1BtB,CAAYoB,EAASF,EAAO,GAC9B","sources":["src/models/fetch-functions.js","src/models/present-movies.js"],"sourcesContent":["import axios from 'axios';\nimport { presentMovies } from './present-movies';\nimport debounce from 'lodash.debounce';\n\nconst DEBOUNCE_DELAY = 500;\nconst API_KEY = '28e7de8a02a020e11a900cecedfaedb8';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\nexport const gallery = document.querySelector('.gallery');\nconst inputMovie = document.querySelector('.SearchInput');\n\nlet page = 1;\n\ninputMovie.addEventListener('input', debounce( async event => {\n  event.preventDefault();\n\n  // const title = event.target.value.trim();\n  const title = inputMovie.value.trim();\n\n  fetchSearchedMovies(title);\n}, DEBOUNCE_DELAY));\n\nexport const fetchSearchedMovies = async (input, page = 1) => {\n\n  const urlSearchedMovies = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${input}&page=${page}`;\n\n  const response = await axios\n    .get(urlSearchedMovies)\n    .then((response) => {\n      galleryOfMovies(response);\n\n      // console.log(response);\n      return response;\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  console.log('Response', response);\n  return response;\n};\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction galleryOfMovies(response) {\n  clearGallery();\n  // console.log('RRRR', response.data.results);\n  const searched = response.data.results;\n  getGenres().then(item => {\n    const genres = item;\n    createCards(searched);\n  });\n\n  function createCards(movie) {\n    movie.map(item => {\n      // const genresName = nameOfGenres(movie, genres);\n      movieCard(item);\n    });\n  }\n\n  // function nameOfGenres(movie, genres) {\n  //   return genres.reduce((accumulator, item) => {\n  //     if (movie.genre_ids.includes(item.id)) {\n  //       accumulator.push(item.name);\n  //     }\n  //     return accumulator;\n  //   }, []);\n  // } \n\n}\n\n\n\nfunction movieCard(movie) {\n  let poster = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  // let genresName =  nameOfGenres(movie, genres);\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    ` <div class=\"movie-card\" id=\"${movie.id}\">\n        <img src=\"${poster}\" alt=\"${movie.title}\" loading=\"lazy\" /> \n        <div class=\"movie-card__info\">\n          <p class=\"movie-card__data\">\n            <span class=\"movie-card__title\">${movie.title}\n          </span>\n           \"//$//{genresName}\" | ${movie.release_date.slice(0,4)}\n          </p>\n        </div>\n      </div>`\n  );\n}\n\nexport const fetchPopularMovies = async () => {\n  const urlPopularMovies = `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}&page=1`;\n\n  const response = await axios\n    .get(urlPopularMovies)\n    .then(function (response) {\n      return response;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getGenres = async () => {\n  const urlGenres = `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`;\n \n  const response = await axios\n    .get(urlGenres)\n    .then(function (response) {\n      return response.data.genres;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getDetails = async movie_id => {\n  const urlInfo = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n\n  const response = await axios\n    .get(urlInfo)\n    .then(function (response) {\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\ndocument.addEventListener('DOMContentLoaded', presentMovies());","import { fetchPopularMovies } from \"./fetch-functions\";\nimport { getGenres } from \"./fetch-functions\";\nimport { galleryCard } from \"./create-movie-card\";\nimport { gallery } from \"./fetch-functions\";\n\nexport function presentMovies(){\n\n  getGenres().then(item => {\n    const genres = item;\n    console.log(genres);\n  \n    fetchPopularMovies().then(result => {\n        const popular = result.data.results;\n        console.log(result.data.results);\n        createCards(popular, genres);\n    });\n  });\n  \n  function createCards(movies, genres){\n    movies.map(movie => {\n    const genresName = nameOfGenres(movie, genres);\n    galleryCard(movie, genresName);\n    });\n  }\n  \n  function nameOfGenres(movie, genres) {\n      return genres.reduce((accumulator, item) => {\n        if (movie.genre_ids.includes(item.id)) {\n          accumulator.push(item.name);\n        }\n        return accumulator;\n      }, []);\n    }\n}\n\n// document.addEventListener('DOMContentLoaded', presentMovies());"],"names":["$2shzp","parcelRequire","$b8c63253da9a1211$export$b21c1b4271bdbe93","document","querySelector","$b8c63253da9a1211$var$inputMovie","addEventListener","$parcel$interopDefault","$50Kfe","async","event","preventDefault","title","value","trim","$b8c63253da9a1211$export$5a3232bc12c1888e","input","page1","urlSearchedMovies","response1","default","get","then","response","innerHTML","searched","data","results","createCards","movie","map","item","poster","poster_path","insertAdjacentHTML","id","release_date","slice","$b8c63253da9a1211$var$movieCard","$b8c63253da9a1211$export$c5604fa8028da00","$b8c63253da9a1211$var$galleryOfMovies","catch","error","console","log","$b8c63253da9a1211$export$225b489b0d997c20","genres","result","popular","movies","genresName","reduce","accumulator","genre_ids","includes","push","name","nameOfGenres","$bw9I2","galleryCard"],"version":3,"file":"index.1a96e4df.js.map"}