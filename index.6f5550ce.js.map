{"mappings":"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","sources":["src/models/fetch-functions.js","src/models/present-movies.js","src/models/genresid-name.js"],"sourcesContent":["/*\nŚCIEŻKA DZIAŁANIA PLIKUÓW JS PRZY POBIERNIU TYTUŁÓW FILMÓW Z API\n1. POPULARNE FILMY\n  - presentMovies() -> getGenres() -> fetchPopularMovies()\n  - createCards() -> namesGenres() -> movieCard() -> html\n2. WYSZUKIWANE FILMY\n  - eventListener() -> fetchSearchedMovies() -> galleryOfMovies()\n  -> getGenres() -> createCards() -> namesGenres() ->\n  -> movieCard() -> html\n\n*/\nimport axios from 'axios';\nimport { presentMovies } from './present-movies';\nimport debounce from 'lodash.debounce';\nimport { namesGenres } from './genresid-name';\n\nconst gallery = document.querySelector('.Gallery');\nconst DEBOUNCE_DELAY = 1000;\nconst API_KEY = '28e7de8a02a020e11a900cecedfaedb8';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst inputMovie = document.querySelector('.SearchInput');\nconst alert = document.querySelector('[data-header=\"alert\"]');\n//edit hubert paginacja\nconst nextButton = document.getElementById('Next-Button');\nconst prevButton = document.getElementById('Prev-Button');\nlet nrButton = '';\n\nconst paginationNumbers = document.getElementById('Pagination-Numbers');\n\nlet currentPage = 1;\n// let pageCount;\n// let page = 1;\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\n//Disable Page Navigation Buttons\nconst disableButton = button => {\n  button.classList.add('Disabled');\n  button.setAttribute('Disabled', true);\n};\nconst enableButton = button => {\n  button.classList.remove('Disabled');\n  button.removeAttribute('Disabled');\n};\n\nconst handlePageButtonsStatus = (page, pageCount) => {\n  if (page === 1) {\n    disableButton(prevButton);\n  } else {\n    enableButton(prevButton);\n  }\n  if (page === pageCount) {\n    disableButton(nextButton);\n  } else {\n    enableButton(nextButton);\n  }\n};\n\n//set active page number\nconst handleActivePageNumber = page => {\n  document.querySelectorAll('.Nr-Button').forEach(button => {\n    button.classList.remove('Pagination-Btn--Active');\n  });\n\n  document.querySelectorAll('.Nr-Button').forEach(button => {\n    const pageIndex = Number(button.textContent);\n    if (pageIndex == page) {\n      button.classList.add('Pagination-Btn--Active');\n    }\n  });\n};\n// hubert's set active page number\n// const updateActivePage = () => {\n//   const buttons = document.querySelectorAll('.Pagination-Numbers .Nr-Button');\n//   buttons.forEach(button => {\n//     const pageNumber = parseInt(button.innerHTML);\n//     if (pageNumber === currentPage) {\n//       button.classList.add('active');\n//     } else {\n//       button.classList.remove('active');\n//     }\n//   });\n// };\n\nconst getDots = () => {\n  paginationNumbers.insertAdjacentHTML(\n    'beforeend',\n    `\n      <button class=\"Pagination-Btn Pagination-Btn__Dots\" id=\"Nr-Button\">\n      ...\n      </button>\n    `\n  );\n};\n\nconst getNumbers = number => {\n  const isActive = number === currentPage ? 'Pagination-Btn--Active' : '';\n\n  paginationNumbers.insertAdjacentHTML(\n    'beforeend',\n    `\n      <button class=\"Pagination-Btn Nr-Button ${isActive}\" id=\"Nr-Button\" >\n      ${number}\n      </button>\n    `\n  );\n};\n\n//GENERATE NUMBERS IN DIV MAIN\nconst getPagination = (page, pageCount) => {\n  paginationNumbers.innerHTML = '';\n  if (page <= 5) {\n    for (let i = 1; i <= 7; i++) {\n      getNumbers(i);\n    }\n    getDots();\n    getNumbers(pageCount);\n  } else if (page >= pageCount - 5) {\n    getNumbers(1);\n    getDots();\n    for (let i = pageCount - 6; i <= pageCount; i++) {\n      getNumbers(i);\n    }\n  } else {\n    getNumbers(1);\n    getDots();\n    for (let i = page - 2; i <= page + 2; i++) {\n      getNumbers(i);\n    }\n    getDots();\n    getNumbers(pageCount);\n  }\n};\n\nwindow.addEventListener('load', () => {\n  handlePageButtonsStatus(1);\n  getPagination(1);\n  handleActivePageNumber(currentPage);\n\n  nextButton.addEventListener('click', event => {\n    event.preventDefault();\n    currentPage++;\n    presentMovies(currentPage);\n    handlePageButtonsStatus(currentPage);\n    getPagination(currentPage);\n    handleActivePageNumber(currentPage);\n  });\n\n  prevButton.addEventListener('click', event => {\n    event.preventDefault();\n    currentPage--;\n    presentMovies(currentPage);\n    handlePageButtonsStatus(currentPage);\n    getPagination(currentPage);\n    handleActivePageNumber(currentPage);\n  });\n\n  paginationNumbers.addEventListener('click', event => {\n    if (event.target.classList.contains('Nr-Button')) {\n      const pageIndex = Number(event.target.textContent);\n      if (pageIndex !== currentPage) {\n        currentPage = pageIndex;\n        presentMovies(currentPage);\n        handlePageButtonsStatus(currentPage);\n        getPagination(currentPage);\n        handleActivePageNumber(currentPage);\n      }\n    }\n  });\n});\n\n// FUNCTION AUTOMATICALLY FETCHING MOST POPULAR MOVIES\nexport const fetchPopularMovies = async page => {\n  const urlPopularMovies = 'https://api.themoviedb.org/3/trending/movie/day';\n\n  const response = await axios\n    .get(urlPopularMovies, {\n      params: {\n        api_key: API_KEY,\n        page: page,\n      },\n    })\n    .then(function (response) {\n      // RENDER PAGINATION WITH TOTAL RESPONSES / 10\n      const totalPages = response.data.total_pages / 10;\n      getPagination(currentPage, totalPages);\n      handlePageButtonsStatus(currentPage, totalPages);\n      return response;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\n// OFF ENTER KEY\ninputMovie.addEventListener('keypress', function (e) {\n  if (e.key === 'Enter') {\n    e.preventDefault();\n  }\n});\n\n//EVENT LISTENING TO SEARCHBAR INPUT\ninputMovie.addEventListener(\n  'input',\n  debounce(async event => {\n    event.preventDefault();\n    if (inputMovie.value == '') {\n      return location.reload();\n    }\n\n    const title = event.target.value.trim();\n\n    fetchSearchedMovies(title);\n  }, DEBOUNCE_DELAY)\n);\n\n// FUNCTION FETCHIN MOVIES BY QUERY\n// deleted from argument pageNumber\nexport const fetchSearchedMovies = async input => {\n  const urlSearchedMovies = 'https://api.themoviedb.org/3/search/movie';\n\n  const response = await axios\n    .get(urlSearchedMovies, {\n      params: {\n        api_key: API_KEY,\n        query: input,\n        // page: pageNumber,\n      },\n    })\n    .then(response => {\n      galleryOfMovies(response);\n      // console.log('searched results:', response.data.results);\n      //       alert.innerHTML = ``;\n      // if (response.data.results.length === 0) {\n      //   console.log(\"error\");\n      //   setInterval(alert.innerHTML = `Search result not successful. Enter the correct movie name and search\n      //   again.`, 1000);\n      // }\n      alert.classList.add('hidden');\n      if (response.data.results.length === 0) {\n        alert.classList.remove('hidden');\n      }\n\n      return response;\n    })\n    .catch(() => {\n      console.log('error');\n    });\n\n  return response;\n};\n\nfunction galleryOfMovies(response) {\n  clearGallery();\n  // console.log('RRRR', response.data.results);\n  const searched = response.data.results;\n  getGenres().then(item => {\n    const genres = item;\n    createCards(searched, genres);\n  });\n}\n\n// FUNCTION GETTING GENRES FROM MOVIES\nexport const getGenres = async () => {\n  const urlGenres = 'https://api.themoviedb.org/3/genre/movie/list';\n  // const urlGenres = \"https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`;\n\n  const response = await axios\n    .get(urlGenres, {\n      params: {\n        api_key: API_KEY,\n      },\n    })\n    .then(function (response) {\n      return response.data.genres;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport function createCards(movie, genres) {\n  // console.log('wynik;', movie, genres);\n  // console.log('test movie:', movie[0].genre_ids);\n  // console.log('test genre:', genres[0]);\n\n  movie.map(movie => {\n    const genresName = namesGenres(movie.genre_ids, genres);\n    movieCard(movie, genresName);\n  });\n}\n\nfunction movieCard(movie, genresName) {\n  let poster = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    ` <div class=\"MovieCard\" id=\"${movie.id}\">\n        <img src=\"${poster}\" <img class =\"MoviePoster\" src=\"${poster}\" \n        onerror=\"this.src='https://ik.imagekit.io/paulinas/noTMDBposter.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1676735394520'\" \n        alt=\"${movie.title}\" loading=\"lazy\" /> \n        <div class=\"MovieCardInfo\">\n          <p class=\"MovieCardData\">\n            <span class=\"MovieCardTitle dark-mode\">${movie.title}\n          </span>\n           ${genresName.splice(0, 3).join(', ')} | ${movie.release_date.slice(\n      0,\n      4\n    )}\n          </p>\n        </div>\n      </div>`\n  );\n  const movieCards = document.querySelectorAll('.MovieCard');\n  for (let movieCard of movieCards) {\n    movieCard.addEventListener('click', function () {\n      movieId = this.id;\n      // console.log('ID: ' + movieId);\n    });\n  }\n  // movieCards.forEach(el => el.addEventListener('click', toggleHidden));\n  // movieCards.forEach(el => el.addEventListener('click', e => activeFetch(e)));\n}\n\ndocument.addEventListener('DOMContentLoaded', presentMovies());\n","import { fetchPopularMovies } from './fetch-functions';\nimport { getGenres, createCards } from './fetch-functions';\n\nexport function presentMovies(page) {\n  getGenres().then(item => {\n    const genres = item;\n    //edit hubert paginacja\n    document.querySelector('.Gallery').innerHTML = '';\n    //edit hubert paginacja\n    fetchPopularMovies(page).then(result => {\n      const popular = result.data.results;\n\n      createCards(popular, genres);\n    });\n  });\n}\n","function namesGenres(ids, map) {\n  let result = [];\n  // (ids || []).forEach(id => {\n  ids.forEach(id => {\n    let genre = map.find(item => item.id === id).name;\n    // console.log('find:', genre);\n    if (genre !== undefined) {\n      result.push(genre);\n    }\n  });\n  // console.log('result:', result);\n  return result;\n}\n\nexport { namesGenres };\n"],"names":["$2shzp","parcelRequire","$82347bf51c8e6982$export$2639bb43b9135e64","page","$b8c63253da9a1211$export$c5604fa8028da00","then","item","genres","document","querySelector","innerHTML","$b8c63253da9a1211$export$225b489b0d997c20","result","$b8c63253da9a1211$export$659b6b545718ce73","data","results","$8ed6053b63534117$export$a49a60d9fed48f00","ids","map","forEach","id","genre","find","name","undefined","push","$b8c63253da9a1211$var$gallery","$b8c63253da9a1211$var$inputMovie","$b8c63253da9a1211$var$alert","$b8c63253da9a1211$var$nextButton","getElementById","$b8c63253da9a1211$var$prevButton","$b8c63253da9a1211$var$paginationNumbers","$b8c63253da9a1211$var$currentPage","$b8c63253da9a1211$var$disableButton","button","classList","add","setAttribute","$b8c63253da9a1211$var$enableButton","remove","removeAttribute","$b8c63253da9a1211$var$handlePageButtonsStatus","pageCount","$b8c63253da9a1211$var$handleActivePageNumber","querySelectorAll","Number","textContent","$b8c63253da9a1211$var$getDots","insertAdjacentHTML","$b8c63253da9a1211$var$getNumbers","number","isActive","$b8c63253da9a1211$var$getPagination","i","window","addEventListener","event","preventDefault","target","contains","pageIndex","async","default","get","params","api_key","response","totalPages","total_pages","catch","error","console","log","e","key","$parcel$interopDefault","$50Kfe","value","location","reload","title","trim","$b8c63253da9a1211$export$5a3232bc12c1888e","input","query","searched","$b8c63253da9a1211$var$galleryOfMovies","length","movie1","movie","genresName","poster","poster_path","splice","join","release_date","slice","movieCards","movieCard1","movieId","this","$b8c63253da9a1211$var$movieCard","genre_ids"],"version":3,"file":"index.6f5550ce.js.map"}