{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,8BAIA,MAKaC,EAAUC,SAASC,cAAc,YACxCC,EAAaF,SAASC,cAAc,gBAI1CC,EAAWC,iBAAiB,QAASC,EAAAC,EAAA,EAAUC,MAAMC,IACnDA,EAAMC,iBAGN,MAAMC,EAAQP,EAAWQ,MAAMC,OAE/BC,EAAoBH,EAAM,GAhBL,MAmBhB,MAAMG,EAAsBN,MAAOO,EAAOC,KAC/C,MAEMC,QAAiBlB,EAAAmB,QACpBC,IAHuB,4CAGA,CACtBC,OAAQ,CACNC,QAxBQ,mCAyBRC,MAAOP,EACPQ,KAAMP,KAGTQ,MAAKC,IAkBV,SAAyBA,GAHvBxB,EAAQyB,UAAY,GAMpB,MAAMC,EAAWF,EAASG,KAAKC,QAM/B,SAASC,EAAYC,GACnBA,EAAMC,KAAIC,KAmBd,SAAmBF,GACjB,IAAIG,EAAS,kCAAkCH,EAAMI,cAErDlC,EAAQmC,mBACN,YACA,+BAA+BL,EAAMM,2BACrBH,WAAgBH,EAAMpB,iJAGCoB,EAAMpB,8DAEdoB,EAAMO,aAAaC,MAAM,EAAE,mD,CA5BxDC,CAAUP,EAAK,G,CARnBQ,IAAYjB,MAAKS,IAEfH,EAAYH,EAAS,G,CAvBnBe,CAAgBjB,GAGTA,KAERkB,OAAOC,IACNC,QAAQC,IAAIF,EAAM,IAItB,OADAC,QAAQC,IAAI,WAAY7B,GACjBA,CAAQ,EAsDV,MAAM8B,EAAqBvC,eAGTT,EAAAmB,QACpBC,IAHsB,kDAGA,CACrBC,OAAQ,CACNC,QApGQ,sCAwGXG,MAAK,SAAUC,GAGd,OAFAoB,QAAQC,IAAI,WAAYrB,GACxBoB,QAAQC,IAAI,UAAWrB,EAASG,KAAKC,SAC9BJ,C,IAERkB,OAAM,SAAUC,GACfC,QAAQC,IAAIF,E,IAMLH,EAAYjC,eAIAT,EAAAmB,QACpBC,IAJe,gDAIA,CACdC,OAAQ,CACNC,QA3HQ,sCA8HXG,MAAK,SAAUC,GACd,OAAOA,EAASG,KAAKoB,M,IAEtBL,OAAM,SAAUC,GACfC,QAAQC,IAAIF,E,IAsBlB1C,SAASG,iBAAiB,wBCvJxBoC,IAAYjB,MAAKS,IACf,MAAMe,EAASf,EAGfc,IAAqBvB,MAAKyB,KAO5B,SAAqBC,EAAQF,GAC3BE,EAAOlB,KAAID,IACT,MAAMoB,EAKV,SAAsBpB,EAAOiB,GAC3B,OAAOA,EAAOI,QAAO,CAACC,EAAapB,KAC7BF,EAAMuB,UAAUC,SAAStB,EAAKI,KAChCgB,EAAYG,KAAKvB,EAAKwB,MAEjBJ,IACN,G,CAXkBK,CAAa3B,EAAOiB,IACvC,EAAAW,EAAAC,aAAY7B,EAAOoB,EAAW,G,CAP9BrB,CAFgBmB,EAAOrB,KAAKC,QAEPmB,EAAO,GAC5B","sources":["src/models/fetch-functions.js","src/models/present-movies.js"],"sourcesContent":["import axios from 'axios';\nimport { presentMovies } from './present-movies';\nimport debounce from 'lodash.debounce';\n\nconst DEBOUNCE_DELAY = 500;\nconst API_KEY = '28e7de8a02a020e11a900cecedfaedb8';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\nexport const gallery = document.querySelector('.Gallery');\nconst inputMovie = document.querySelector('.SearchInput');\n\nlet page = 1;\n\ninputMovie.addEventListener('input', debounce( async event => {\n  event.preventDefault();\n\n  // const title = event.target.value.trim();\n  const title = inputMovie.value.trim();\n\n  fetchSearchedMovies(title);\n}, DEBOUNCE_DELAY));\n\nexport const fetchSearchedMovies = async (input, page) => {\n  const urlSearchedMovies = 'https://api.themoviedb.org/3/search/movie';\n\n  const response = await axios\n    .get(urlSearchedMovies, {\n      params: {\n        api_key: API_KEY,\n        query: input,\n        page: page,\n      },\n    })\n    .then(response => {\n      galleryOfMovies(response);\n\n      // console.log(response);\n      return response;\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  console.log('Response', response);\n  return response;\n};\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction galleryOfMovies(response) {\n  clearGallery();\n  // console.log('RRRR', response.data.results);\n  const searched = response.data.results;\n  getGenres().then(item => {\n    const genres = item;\n    createCards(searched);\n  });\n\n  function createCards(movie) {\n    movie.map(item => {\n      // const genresName = nameOfGenres(movie, genres);\n      movieCard(item);\n    });\n  }\n\n  // function nameOfGenres(movie, genres) {\n  //   return genres.reduce((accumulator, item) => {\n  //     if (movie.genre_ids.includes(item.id)) {\n  //       accumulator.push(item.name);\n  //     }\n  //     return accumulator;\n  //   }, []);\n  // } \n\n}\n\n\n\nfunction movieCard(movie) {\n  let poster = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  // let genresName =  nameOfGenres(movie, genres);\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    ` <div class=\"MovieCard\" id=\"${movie.id}\">\n        <img src=\"${poster}\" alt=\"${movie.title}\" loading=\"lazy\" /> \n        <div class=\"MovieCardInfo\">\n          <p class=\"MovieCardData\">\n            <span class=\"MovieCardTitle\">${movie.title}\n          </span>\n           \"//$//{genresName}\" | ${movie.release_date.slice(0,4)}\n          </p>\n        </div>\n      </div>`\n  );\n}\n\nexport const fetchPopularMovies = async () => {\n  const urlPopularMovies = 'https://api.themoviedb.org/3/trending/movie/day';\n\n  const response = await axios\n    .get(urlPopularMovies, {\n      params: {\n        api_key: API_KEY,\n        // page: page,\n      },\n    })\n    .then(function (response) {\n      console.log('response', response);\n      console.log('results', response.data.results);\n      return response;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getGenres = async () => {\n  const urlGenres = 'https://api.themoviedb.org/3/genre/movie/list';\n  // const urlGenres = \"https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`;\n\n  const response = await axios\n    .get(urlGenres, {\n      params: {\n        api_key: API_KEY,\n      },\n    })\n    .then(function (response) {\n      return response.data.genres;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getDetails = async movie_id => {\n  const urlInfo = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n\n  const response = await axios\n    .get(urlInfo)\n    .then(function (response) {\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\ndocument.addEventListener('DOMContentLoaded', presentMovies());","import { fetchPopularMovies } from './fetch-functions';\nimport { getGenres } from './fetch-functions';\nimport { galleryCard } from './create-movie-card';\nimport { gallery } from './fetch-functions';\n\nexport function presentMovies() {\n  getGenres().then(item => {\n    const genres = item;\n    // console.log(genres);\n\n    fetchPopularMovies().then(result => {\n      const popular = result.data.results;\n      // console.log(result.data.results);\n      createCards(popular, genres);\n    });\n  });\n\n  function createCards(movies, genres) {\n    movies.map(movie => {\n      const genresName = nameOfGenres(movie, genres);\n      galleryCard(movie, genresName);\n    });\n  }\n\n  function nameOfGenres(movie, genres) {\n    return genres.reduce((accumulator, item) => {\n      if (movie.genre_ids.includes(item.id)) {\n        accumulator.push(item.name);\n      }\n      return accumulator;\n    }, []);\n  }\n}\n\n// document.addEventListener('DOMContentLoaded', presentMovies());\n"],"names":["$2shzp","parcelRequire","$b8c63253da9a1211$export$b21c1b4271bdbe93","document","querySelector","$b8c63253da9a1211$var$inputMovie","addEventListener","$parcel$interopDefault","$50Kfe","async","event","preventDefault","title","value","trim","$b8c63253da9a1211$export$5a3232bc12c1888e","input","page1","response1","default","get","params","api_key","query","page","then","response","innerHTML","searched","data","results","createCards","movie","map","item","poster","poster_path","insertAdjacentHTML","id","release_date","slice","$b8c63253da9a1211$var$movieCard","$b8c63253da9a1211$export$c5604fa8028da00","$b8c63253da9a1211$var$galleryOfMovies","catch","error","console","log","$b8c63253da9a1211$export$225b489b0d997c20","genres","result","movies","genresName","reduce","accumulator","genre_ids","includes","push","name","nameOfGenres","$bw9I2","galleryCard"],"version":3,"file":"index.6797f842.js.map"}