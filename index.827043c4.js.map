{"mappings":"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","sources":["src/models/fetch-functions.js","src/models/present-movies.js"],"sourcesContent":["import axios from 'axios';\nimport { presentMovies } from './present-movies';\nimport debounce from 'lodash.debounce';\n\nconst DEBOUNCE_DELAY = 500;\nconst API_KEY = '28e7de8a02a020e11a900cecedfaedb8';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\nexport const gallery = document.querySelector('.gallery');\nconst inputMovie = document.querySelector('.SearchInput');\n\nlet page = 1;\n\ninputMovie.addEventListener(\n  'input',\n  debounce(async event => {\n    event.preventDefault();\n\n    // const title = event.target.value.trim();\n    const title = inputMovie.value.trim();\n\n    fetchSearchedMovies(title);\n  }, DEBOUNCE_DELAY)\n);\n\nexport const fetchSearchedMovies = async (input, page) => {\n  // const urlSearchedMovies = `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${input}&page=${page}`;\n\n  const response = await axios\n    .get('https://api.themoviedb.org/3/search/movie', {\n      params: {\n        api_key: API_KEY,\n        query: input,\n        page: page,\n      },\n    })\n    .then(response => {\n      galleryOfMovies(response);\n\n      // console.log(response);\n      return response;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n\n  console.log('Response', response);\n  return response;\n};\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction galleryOfMovies(response) {\n  clearGallery();\n  // console.log('RRRR', response.data.results);\n  const searched = response.data.results;\n  getGenres().then(item => {\n    const genres = item;\n    createCards(searched);\n  });\n\n  function createCards(movie) {\n    movie.map(item => {\n      // const genresName = nameOfGenres(movie, genres);\n      movieCard(item);\n    });\n  }\n\n  // function nameOfGenres(movie, genres) {\n  //   return genres.reduce((accumulator, item) => {\n  //     if (movie.genre_ids.includes(item.id)) {\n  //       accumulator.push(item.name);\n  //     }\n  //     return accumulator;\n  //   }, []);\n  // }\n}\n\nfunction movieCard(movie) {\n  let poster = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  // let genresName =  nameOfGenres(movie, genres);\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    ` <div class=\"movie-card\" id=\"${movie.id}\">\n        <img src=\"${poster}\" alt=\"${movie.title}\" loading=\"lazy\" /> \n        <div class=\"movie-card__info\">\n          <p class=\"movie-card__data\">\n            <span class=\"movie-card__title\">${movie.title}\n          </span>\n           \"//$//{genresName}\" | ${movie.release_date.slice(0, 4)}\n          </p>\n        </div>\n      </div>`\n  );\n}\n\nexport const fetchPopularMovies = async () => {\n  const urlPopularMovies = `https://api.themoviedb.org/3/trending/movie/day?api_key=${API_KEY}&page=1`;\n\n  const response = await axios\n    .get(urlPopularMovies)\n    .then(function (response) {\n      return response;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getGenres = async () => {\n  const urlGenres = `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`;\n\n  const response = await axios\n    .get(urlGenres)\n    .then(function (response) {\n      return response.data.genres;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport const getDetails = async movie_id => {\n  const urlInfo = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n\n  const response = await axios\n    .get(urlInfo)\n    .then(function (response) {\n      console.log(response.data);\n      return response.data;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\ndocument.addEventListener('DOMContentLoaded', presentMovies());\n","import { fetchPopularMovies } from \"./fetch-functions\";\nimport { getGenres } from \"./fetch-functions\";\nimport { galleryCard } from \"./create-movie-card\";\nimport { gallery } from \"./fetch-functions\";\n\nexport function presentMovies(){\n\n  getGenres().then(item => {\n    const genres = item;\n    console.log(genres);\n  \n    fetchPopularMovies().then(result => {\n        const popular = result.data.results;\n        console.log(result.data.results);\n        createCards(popular, genres);\n    });\n  });\n  \n  function createCards(movies, genres){\n    movies.map(movie => {\n    const genresName = nameOfGenres(movie, genres);\n    galleryCard(movie, genresName);\n    });\n  }\n  \n  function nameOfGenres(movie, genres) {\n      return genres.reduce((accumulator, item) => {\n        if (movie.genre_ids.includes(item.id)) {\n          accumulator.push(item.name);\n        }\n        return accumulator;\n      }, []);\n    }\n}\n\n// document.addEventListener('DOMContentLoaded', presentMovies());"],"names":["$bpxeT","parcelRequire","$3803c7cc153b9ece$var$API_KEY","$3803c7cc153b9ece$export$b21c1b4271bdbe93","document","querySelector","$3803c7cc153b9ece$var$inputMovie","addEventListener","$parcel$interopDefault","$l1Gdk","$2TvXO","mark","_callee","event","title","preventDefault","value","trim","$3803c7cc153b9ece$export$5a3232bc12c1888e","input","page1","response1","$dIxxU","default","get","params","api_key","query","page","then","response","$3803c7cc153b9ece$var$galleryOfMovies","catch","error","console","log","_ctx","sent","innerHTML","searched","data","results","$3803c7cc153b9ece$export$c5604fa8028da00","item","map","movie","poster","concat","poster_path","insertAdjacentHTML","id","release_date","slice","$3803c7cc153b9ece$var$movieCard","$3803c7cc153b9ece$export$225b489b0d997c20","urlPopularMovies","response2","urlGenres","response3","genres","movie_id","urlInfo","response4","result","popular","movies","genresName","reduce","accumulator","genre_ids","includes","push","name","nameOfGenres","$eKj0a","galleryCard","createCards"],"version":3,"file":"index.827043c4.js.map"}