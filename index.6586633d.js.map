{"mappings":"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","sources":["src/models/fetch-functions.js","src/models/genresid-name.js","src/models/present-movies.js"],"sourcesContent":["/*\nŚCIEŻKA DZIAŁANIA PLIKUÓW JS PRZY POBIERNIU TYTUŁÓW FILMÓW Z API\n1. POPULARNE FILMY\n  - presentMovies() -> getGenres() -> fetchPopularMovies() -> createCards\n  - createCards() -> namesGenres() -> movieCard() -> html\n2. WYSZUKIWANE FILMY\n  - eventListener() -> fetchSearchedMovies() -> galleryOfMovies()\n  -> getGenres() -> createCards() -> namesGenres() ->\n  -> movieCard() -> html\n\n*/\nimport axios from 'axios';\nimport { presentMovies } from './present-movies';\nimport debounce from 'lodash.debounce';\nimport { namesGenres } from './genresid-name';\n// import { activeFetch, toggleHidden } from './modal-movie';\n\nlet movieId;\nconst gallery = document.querySelector('.Gallery');\nconst DEBOUNCE_DELAY = 1000;\nconst API_KEY = '28e7de8a02a020e11a900cecedfaedb8';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst inputMovie = document.querySelector('.SearchInput');\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\n// FUNCTION AUTOMATICALLY FETCHING MOST POPULAR MOVIES\nexport const fetchPopularMovies = async () => {\n  const urlPopularMovies = 'https://api.themoviedb.org/3/trending/movie/day';\n\n  const response = await axios\n    .get(urlPopularMovies, {\n      params: {\n        api_key: API_KEY,\n        // page: page,\n      },\n    })\n    .then(function (response) {\n      // console.log('popular:', response);\n      // console.log('popular results:', response.data.results);\n      return response;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\n// EVENT LISTENING TO SEARCHBAR INPUT\ninputMovie.addEventListener(\n  'input',\n  debounce(async event => {\n    event.preventDefault();\n\n    // const title = event.target.value.trim();\n    const title = inputMovie.value.trim();\n\n    fetchSearchedMovies(title);\n  }, DEBOUNCE_DELAY)\n);\n\n// FUNCTION FETCHIN MOVIES BY QUERY\nexport const fetchSearchedMovies = async (input, page) => {\n  const urlSearchedMovies = 'https://api.themoviedb.org/3/search/movie';\n\n  const response = await axios\n    .get(urlSearchedMovies, {\n      params: {\n        api_key: API_KEY,\n        query: input,\n        page: page,\n      },\n    })\n    .then(response => {\n      galleryOfMovies(response);\n\n      // console.log('searched results:', response.data.results);\n      return response;\n    })\n    .catch(error => {\n      console.log(error);\n    });\n\n  return response;\n};\n\nfunction galleryOfMovies(response) {\n  clearGallery();\n  // console.log('RRRR', response.data.results);\n  const searched = response.data.results;\n  getGenres().then(item => {\n    const genres = item;\n    createCards(searched, genres);\n  });\n}\n\n// FUNCTION GETTING GENRES FROM MOVIES\nexport const getGenres = async () => {\n  const urlGenres = 'https://api.themoviedb.org/3/genre/movie/list';\n  // const urlGenres = \"https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`;\n\n  const response = await axios\n    .get(urlGenres, {\n      params: {\n        api_key: API_KEY,\n      },\n    })\n    .then(function (response) {\n      return response.data.genres;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n  return response;\n};\n\nexport function createCards(movie, genres) {\n  // console.log('wynik;', movie, genres);\n  // console.log('test movie:', movie[0].genre_ids);\n  // console.log('test genre:', genres[0]);\n\n  movie.map(movie => {\n    const genresName = namesGenres(movie.genre_ids, genres);\n    movieCard(movie, genresName);\n  });\n}\n\n// export const getDetails = async movie_id => {\n//   const urlInfo = `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n\n//   const response = await axios\n//     .get(urlInfo)\n//     .then(function (response) {\n//       console.log(response.data);\n//       return response.data;\n//     })\n//     .catch(function (error) {\n//       console.log(error);\n//     });\n\n//   return response;\n// };\n\nfunction movieCard(movie, genresName) {\n  let poster = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    ` <div class=\"MovieCard\" id=\"${movie.id}\">\n        <img src=\"${poster}\" <img class =\"MoviePoster\" src=\"${poster}\" \n        onerror=\"this.src='https://ik.imagekit.io/paulinas/noTMDBposter.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1676735394520'\" \n        alt=\"${movie.title}\" loading=\"lazy\" /> \n        <div class=\"MovieCardInfo\">\n          <p class=\"MovieCardData\">\n            <span class=\"MovieCardTitle\">${movie.title}\n          </span>\n           ${genresName.splice(0, 3).join(', ')} | ${movie.release_date.slice(\n      0,\n      4\n    )}\n          </p>\n        </div>\n      </div>`\n  );\n  const movieCards = document.querySelectorAll('.MovieCard');\n  for (let movieCard of movieCards) {\n    movieCard.addEventListener('click', function () {\n      movieId = this.id;\n      // console.log('ID: ' + movieId);\n    });\n  }\n  // movieCards.forEach(el => el.addEventListener('click', toggleHidden));\n  // movieCards.forEach(el => el.addEventListener('click', e => activeFetch(e)));\n}\n\ndocument.addEventListener('DOMContentLoaded', presentMovies());\n","function namesGenres(ids, map) {\n  let result = [];\n  // (ids || []).forEach(id => {\n  ids.forEach(id => {\n    let genre = map.find(item => item.id === id).name;\n    // console.log('find:', genre);\n    if (genre !== undefined) {\n      result.push(genre);\n    }\n  });\n  // console.log('result:', result);\n  return result;\n}\n\nexport { namesGenres };\n","import { fetchPopularMovies } from './fetch-functions';\nimport { getGenres, createCards } from './fetch-functions';\n\nexport function presentMovies() {\n  getGenres().then(item => {\n    const genres = item;\n\n    fetchPopularMovies().then(result => {\n      const popular = result.data.results;\n      createCards(popular, genres);\n    });\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$3803c7cc153b9ece$var$gallery","document","querySelector","$3803c7cc153b9ece$var$API_KEY","$3803c7cc153b9ece$var$inputMovie","$3803c7cc153b9ece$export$225b489b0d997c20","$parcel$interopDefault","$2TvXO","mark","_callee","response1","$dIxxU","default","get","params","api_key","then","response","catch","error","console","log","_ctx","sent","addEventListener","$l1Gdk","event","title","preventDefault","value","trim","$3803c7cc153b9ece$export$5a3232bc12c1888e","input","page","response2","query","$3803c7cc153b9ece$var$galleryOfMovies","innerHTML","searched","data","results","$3803c7cc153b9ece$export$c5604fa8028da00","item","$3803c7cc153b9ece$export$659b6b545718ce73","response3","genres","movie1","map","movie","ids","result","genresName","poster","concat","poster_path","insertAdjacentHTML","id","splice","join","release_date","slice","movieCards","querySelectorAll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","this","err","return","$3803c7cc153b9ece$var$movieCard","genre_ids","forEach","genre","find","name","push"],"version":3,"file":"index.6586633d.js.map"}